<!DOCTYPE html>
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<!--defaultCSS-->
<title>Ehcache 服务器缓存集群</title>





<style type="text/css" id="wiz_todo_style_id" wiz_link_version="01.00.09">.wiz-todo, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { display: inline-block; padding-top: 7px; padding-bottom: 6px; line-height: 1.5;} .wiz-todo-label-checked {  color: #666;} .wiz-todo-label-unchecked {text-decoration: initial;} .wiz-todo-completed-info {padding-left: 44px; display: inline-block; } .wiz-todo-avatar { width:20px; height: 20px; vertical-align: -20%; margin-right:10px; border-radius: 2px;} .wiz-todo-account, .wiz-todo-dt { color: #666; }</style>



<style type="text/css" id="wiz_custom_css">
body
{
    font-family: 微软雅黑,"Microsoft YaHei", Georgia,Helvetica,Arial,sans-serif,宋体, PMingLiU,serif;
    font-size: 10.5pt;
    line-height: 1.5;
}
html, body
{
    
    
}
h1 {
    font-size:1.5em;
    font-weight:bold;
}
h2 {
    font-size:1.4em;
    font-weight:bold;
}
h3 {
    font-size:1.3em;
    font-weight:bold;
}
h4 {
    font-size:1.2em;
    font-weight:bold;
}
h5 {
    font-size:1.1em;
    font-weight:bold;
}
h6 {
    font-size:1.0em;
    font-weight:bold;
}
img {
    border:0;
    max-width: 100%;
    height: auto !important;
}
blockquote {
    margin-top:0px;
    margin-bottom:0px;
}
table {
    border-collapse:collapse;
    border:1px solid #bbbbbb;
}
td {
    border-collapse:collapse;
    border:1px solid #bbbbbb;
}
</style>

</head>

<body style="" ><div><br></div><div style="text-align: center;"><span style="font-size: 10.5pt; line-height: 1.5;"><b><span data-wiz-span="data-wiz-span" style="font-size: 20pt;">Ehcache 服务器缓存集群&nbsp;</span></b></span></div><div>测试采用的jar包如下：</div><div><img src="Ehcache 服务器缓存集群_files/4086c2f6-a11b-488b-8a59-0e17ef225ae3.png" border="0" alt="" name=""><br></div><div><font color="#ff0000">注意：<span style="background-color: rgb(255, 255, 255); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; widows: 1;">在一些启用了 IPv6 的电脑中，经常启动的时候报如下错误信息：</span></font></div><div><span style="background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; widows: 1;">解决的办法是增加 JVM 参数：-Djava.net.preferIPv4Stack=true。如果是 Tomcat 服务器，可在 catalina.bat 或者 catalina.sh 中增加如下环境变量即可：</span></div><div style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);">&nbsp;SET CATALINA_OPTS=-Djava.net.preferIPv4Stack=true&nbsp;<br style="word-wrap: break-word;">经过实际测试发现，集群方式下的缓存数据都可以在 1 秒钟之内完成到其节点的复制。</div><div style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"><span style="color: rgb(255, 0, 0);">eclipse中需要这样： 选着启动类--&gt;右键----&gt;Run As ---&gt;Run configurations&nbsp;</span></div><div style="word-wrap: break-word; font-family: 宋体, Arial; font-size: 16px; line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"><img src="Ehcache 服务器缓存集群_files/ccd6ed2b-c738-4cb8-b43e-f1a5d1a1ed37.png" border="0" alt="" name=""><br></div><div style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"><br></div><div><div><b><span data-wiz-span="data-wiz-span" style="font-size: 16pt;">1）：RMI &nbsp;实现集群 &nbsp;</span></b></div><div>（ehcache.xml文件如下）</div><div><div><!--WizRtf2Html Charset=0  --><span style="font-size:16pt;color:#008080;font-family:'Consolas';">&lt;?<span style="color:#3f7f7f;">xml<span style="color:WindowText;">&nbsp;<span style="color:#7f007f;">version<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"1.0"</span></span></span>&nbsp;<span style="color:#7f007f;">encoding<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"UTF-8"</span></span></span></span></span>?&gt;</span></div><div></div><div><span style="font-size:16pt;color:#008080;font-family:'Consolas';">&lt;<span style="color:#3f7f7f;">ehcache</span>&gt;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">&lt;!--&nbsp;指定除自身之外的网络群体中其他提供同步的主机列表，用“|”分开不同的主机&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">cacheManagerPeerProviderFactory</span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">class<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"net.sf.ehcache.distribution.RMICacheManagerPeerProviderFactory"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">properties<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"peerDiscovery=manual,rmiUrls=//192.168.0.91:1615/book"<span style="font-style:normal;color:#008080;">/&gt;</span></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">&lt;!--&nbsp;//127.0.0.1:1614/book|&nbsp;--&gt;</span></span></span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">&lt;!--配宿主主机配置监听程序，来发现其他主机发来的同步请求--&gt;</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">cacheManagerPeerListenerFactory<span style="color:WindowText;">&nbsp;<span style="color:#7f007f;">class</span></span></span></span>=<span style="font-style:italic;color:#2a00ff;">"net.sf.ehcache.distribution.RMICacheManagerPeerListenerFactory"<span style="font-style:normal;color:WindowText;">&nbsp;</span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">properties<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"port=1614,socketTimeoutMillis=120000"</span></span></span>&nbsp;<span style="color:#008080;">/&gt;<span style="color:#3f5fbf;">&lt;!--&nbsp;此处的port=1614&nbsp;是主服务器的端口,&nbsp;上边rmiUrls&nbsp;的只写目标机器的--&gt;</span></span></span></div><div></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">defaultCache</span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">maxElementsInMemory<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"2147483647"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">eternal<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"false"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">timeToIdleSeconds<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"259200000"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">memoryStoreEvictionPolicy<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"LRU"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">timeToLiveSeconds<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"259200000"<span style="font-style:normal;color:#008080;">&gt;</span></span></span></span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;/<span style="color:#3f7f7f;">defaultCache</span>&gt;</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">cache<span style="color:WindowText;">&nbsp;<span style="color:#7f007f;">name</span></span></span></span>=<span style="font-style:italic;color:#2a00ff;">"book"</span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">maxElementsInMemory<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"2147483647"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">eternal<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"false"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">timeToIdleSeconds<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"259200000"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">memoryStoreEvictionPolicy<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"LRU"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">timeToLiveSeconds<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"259200000"<span style="font-style:normal;color:#008080;">&gt;</span></span></span></span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">cacheEventListenerFactory<span style="color:WindowText;">&nbsp;<span style="color:#7f007f;">class</span></span></span></span>=<span style="font-style:italic;color:#2a00ff;">"net.sf.ehcache.distribution.RMICacheReplicatorFactory"</span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">properties<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"replicateAsynchronously=true,&nbsp;replicatePuts=true,replicateUpdates=true,&nbsp;replicateUpdatesViaCopy=true,replicateRemovals=true"<span style="font-style:normal;color:#008080;">/&gt;</span></span></span></span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">bootstrapCacheLoaderFactory<span style="color:WindowText;">&nbsp;<span style="color:#7f007f;">class</span></span></span></span>=<span style="font-style:italic;color:#2a00ff;">"net.sf.ehcache.distribution.RMIBootstrapCacheLoaderFactory"<span style="font-style:normal;color:#008080;">/&gt;</span></span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;/<span style="color:#3f7f7f;">cache</span>&gt;</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">&lt;!--</span></span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;·name：Cache的唯一标识</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;maxElementsInMemory：内存中最大缓存对象数。</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;maxElementsOnDisk：磁盘中最大缓存对象数，若是0表示无穷大。</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;eternal：Element是否永久有效，一但设置了，timeout将不起作用。</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;overflowToDisk：配置此属性，当内存中Element数量达到maxElementsInMemory时，Ehcache将会Element写到磁盘中。</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;timeToIdleSeconds：设置Element在失效前的允许闲置时间。仅当element不是永久有效时使用，可选属性，默认值是0，也就是可闲置时间无穷大。</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;timeToLiveSeconds：设置Element在失效前允许存活时间。最大时间介于创建时间和失效时间之间。仅当element不是永久有效时使用，默认是0.，也就是element存活时间无穷大。</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;diskPersistent：是否缓存虚拟机重启期数据。（这个虚拟机是指什么虚拟机一直没看明白是什么,有高人还希望能指点一二）。</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;diskExpiryThreadIntervalSeconds：磁盘失效线程运行时间间隔，默认是120秒。</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;diskSpoolBufferSizeMB：这个参数设置DiskStore（磁盘缓存）的缓存区大小。默认是30MB。每个Cache都应该有自己的一个缓冲区。</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;memoryStoreEvictionPolicy：当达到maxElementsInMemory限制时，Ehcache将会根据指定的策略去清理内存。默认策略是LRU（最近最少使用）。你可以设置为FIFO（先进先出）或是LFU（较少使用）。这里比较遗憾，Ehcache并没有提供一个用户定制策略的接口，仅仅支持三种指定策略，感觉做的不够理想。</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;--&gt;</span></div><span style="font-size:16pt;color:#008080;font-family:'Consolas';">&lt;/<span style="color:#3f7f7f;">ehcache</span>&gt;</span>&nbsp;&nbsp;<br></div></div><div><br></div><div><br></div><div><span data-wiz-span="data-wiz-span" style="font-size: 16pt;"><b>2）：使用jgroup的udp&nbsp;</b></span></div><div><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">&nbsp; &nbsp;&nbsp;</span>这种方式很方便 &nbsp;不需要修改，只需要将相同文件放入不同服务器即可。<span style="font-size: 10.5pt; line-height: 1.5;">（ehcache.xml文件如下）</span></div><div><div><!--WizRtf2Html Charset=0  --><span style="font-size:16pt;color:#008080;font-family:'Consolas';">&lt;?<span style="color:#3f7f7f;">xml<span style="color:WindowText;">&nbsp;<span style="color:#7f007f;">version<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"1.0"</span></span></span>&nbsp;<span style="color:#7f007f;">encoding<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"UTF-8"</span></span></span></span></span>?&gt;</span></div><div></div><div><span style="font-size:16pt;color:#008080;font-family:'Consolas';">&lt;<span style="color:#3f7f7f;">ehcache</span>&gt;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">&lt;!--&nbsp;EhCache&nbsp;的&nbsp;Groups&nbsp;集群模式还有另外一种节点发现方式，&nbsp;就是通过多播（&nbsp;multicast&nbsp;）来维护集群中的所有有效节点。&nbsp;</span></span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这也是最为简单而且灵活的方式，与手工模式不同的是，&nbsp;每个节点上的配置信息都相同，大大方便了节点的部署，&nbsp;集群启动时会自动发现同一局域网的缓存服务器&nbsp;--&gt;</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">&lt;!--&nbsp;以jgroups&nbsp;多播方式配置集群，自动发现集节点&nbsp;--&gt;</span></span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">&lt;!--&nbsp;mcast_addr=224.12.21.112;mcast_port=7777&nbsp;多组传播的共同指向地址&nbsp;--&gt;</span></span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">&lt;!--&nbsp;1)：&nbsp;什么是Multicast&nbsp;Multicast&nbsp;是一种同时像多台机器发送数据的机制。&nbsp;Multicast使用224.0.0.0&nbsp;</span></span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;到239.255.255.255&nbsp;这段IP来传送数据，这段IP地址是保留的，发送到这上面的数据不会通过你的子网转发。在RFC-1060中定义了一部分预留的组播地址，使用时应注意不&nbsp;</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;要重复。&nbsp;一些比较特别的组播地址：&nbsp;2)：&nbsp;224.0.0.0&nbsp;这个是保留地址，不会被指定到任何的组播组&nbsp;2)&nbsp;224.0.0.1&nbsp;这个地址在所有的主机上被指定为一个永久组播组，这个地址可以用来找到本地子网内所有的组播主机。使用ping&nbsp;</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;224.0.0.1可以查看这些地址。&nbsp;在一个组播中的所有主机使用一个相同的组播地址，它们被称为一个组(Group),组中的成员是动态的，他们可以随时加入或者离开组。每台主机可以同时是&nbsp;</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;多个组的成员，也可以不属于任何一个组。比较特别的是，并不是只有组中的成员才可以给组发送数据。&nbsp;组分为两种，一种是永久性的，一种是动态的。对于永久性&nbsp;</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;的组，他们拥有一个众所周知的管理IP地址，这个地址不是组中的成员，它是永久的。永久性的组可以拥有任何数量的成员，甚至没有成员。而动态组只有在拥有&nbsp;</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;成员的时候才存在。JGroups使用的就是动态组来实现组播数据的。&nbsp;--&gt;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">cacheManagerPeerProviderFactory</span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">class<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"net.sf.ehcache.distribution.jgroups.JGroupsCacheManagerPeerProviderFactory"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">properties<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"connect=UDP(mcast_addr=231.12.21.132;mcast_port=45566;):PING:</span></span></span></span></div><div><span style="font-style:italic;font-size:16pt;color:#2a00ff;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;MERGE2:FD_SOCK:VERIFY_SUSPECT:pbcast.NAKACK:UNICAST:pbcast.STABLE:FRAG:pbcast.GMS"</span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">propertySeparator<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"::"</span></span></span>&nbsp;<span style="color:#008080;">/&gt;</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">defaultCache<span style="color:WindowText;">&nbsp;<span style="color:#7f007f;">maxElementsInMemory</span></span></span></span>=<span style="font-style:italic;color:#2a00ff;">"300000"<span style="font-style:normal;color:WindowText;">&nbsp;<span style="color:#7f007f;">eternal</span></span></span>=<span style="font-style:italic;color:#2a00ff;">"false"</span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">timeToIdleSeconds<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"259200000"</span></span></span>&nbsp;<span style="color:#7f007f;">memoryStoreEvictionPolicy<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"LRU"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">timeToLiveSeconds<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"259200000"<span style="font-style:normal;color:#008080;">&gt;</span></span></span></span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;/<span style="color:#3f7f7f;">defaultCache</span>&gt;</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">cache<span style="color:WindowText;">&nbsp;<span style="color:#7f007f;">name</span></span></span></span>=<span style="font-style:italic;color:#2a00ff;">"book"<span style="font-style:normal;color:WindowText;">&nbsp;<span style="color:#7f007f;">maxElementsInMemory</span></span></span>=<span style="font-style:italic;color:#2a00ff;">"2147483647"<span style="font-style:normal;color:WindowText;">&nbsp;<span style="color:#7f007f;">eternal</span></span></span>=<span style="font-style:italic;color:#2a00ff;">"false"</span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">timeToIdleSeconds<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"259200000"</span></span></span>&nbsp;<span style="color:#7f007f;">memoryStoreEvictionPolicy<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"LRU"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">timeToLiveSeconds<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"259200000"<span style="font-style:normal;color:#008080;">&gt;</span></span></span></span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">cacheEventListenerFactory</span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">class<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">properties<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"replicateAsynchronously=true,&nbsp;replicatePuts=true,replicateUpdates=true,&nbsp;replicateUpdatesViaCopy=true,replicateRemovals=true"</span></span></span>&nbsp;<span style="color:#008080;">/&gt;</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">bootstrapCacheLoaderFactory</span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">class<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"net.sf.ehcache.distribution.jgroups.JGroupsBootstrapCacheLoaderFactory"&nbsp;<span style="font-style:normal;color:#008080;">/&gt;</span></span></span></span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;/<span style="color:#3f7f7f;">cache</span>&gt;</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">&lt;!--&nbsp;·name：Cache的唯一标识&nbsp;·&nbsp;maxElementsInMemory：内存中最大缓存对象数。&nbsp;·&nbsp;maxElementsOnDisk：磁盘中最大缓存对象数，若是0表示无穷大。&nbsp;</span></span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;eternal：Element是否永久有效，一但设置了，timeout将不起作用。&nbsp;·&nbsp;overflowToDisk：配置此属性，当内存中Element数量达到maxElementsInMemory时，Ehcache将会Element写到磁盘中。&nbsp;</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;timeToIdleSeconds：设置Element在失效前的允许闲置时间。仅当element不是永久有效时使用，可选属性，默认值是0，也就是可闲置时间无穷大。&nbsp;</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;timeToLiveSeconds：设置Element在失效前允许存活时间。最大时间介于创建时间和失效时间之间。仅当element不是永久有效时使用，默认是0.，也就是element存活时间无穷大。&nbsp;</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;diskPersistent：是否缓存虚拟机重启期数据。（这个虚拟机是指什么虚拟机一直没看明白是什么,有高人还希望能指点一二）。&nbsp;·&nbsp;diskExpiryThreadIntervalSeconds：磁盘失效线程运行时间间隔，默认是120秒。&nbsp;</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;diskSpoolBufferSizeMB：这个参数设置DiskStore（磁盘缓存）的缓存区大小。默认是30MB。每个Cache都应该有自己的一个缓冲区。&nbsp;</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;·&nbsp;memoryStoreEvictionPolicy：当达到maxElementsInMemory限制时，Ehcache将会根据指定的策略去清理内存。默认策略是LRU（最近最少使用）。你可以设置为FIFO（先进先出）或是LFU（较少使用）。这里比较遗憾，Ehcache并没有提供一个用户定制策略的接口，仅仅支持三种指定策略，感觉做的不够理想。&nbsp;--&gt;</span></div><div><span style="font-size:16pt;color:#008080;font-family:'Consolas';">&lt;/<span style="color:#3f7f7f;">ehcache</span>&gt;</span></div></div><div><span style="font-size:16pt;color:#008080;font-family:'Consolas';"><br></span></div><div><b style="font-size: 21px; line-height: 32px;">3）：使用jgroup的Tcp</b></div><div>注意： 1）<span style="color: rgb(63, 95, 191); font-family: Consolas; font-size: 21px; line-height: 32px;">TCP(</span><span style="color: rgb(42, 0, 255); font-family: Consolas; font-size: 21px; font-style: italic; line-height: 32px;">bind_addr=192.168.0.33;bind_port=50061) 这里的ip和端口是自己本机的</span></div><div><font face="Consolas">&nbsp; &nbsp; &nbsp;</font><span style="font-family: Consolas; font-size: 10.5pt; line-height: 1.5;">&nbsp;2</span><font face="Consolas" style="font-size: 10.5pt; line-height: 1.5;">)</font><span style="color: rgb(42, 0, 255); font-family: Consolas; font-size: 21px; font-style: italic; line-height: 32px;">TCPPING(initial_hosts=192.168.0.33[50061],192.168.0.91[50062]) 这里的是这个集群中的ip和端口包括自己的</span></div><div><font face="微软雅黑">&nbsp; &nbsp;&nbsp;</font><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">&nbsp; &nbsp;&nbsp;</span><span style="font-family: 微软雅黑; font-size: 10.5pt; line-height: 1.5;">&nbsp; &nbsp;&nbsp;</span><span style="font-size: 10.5pt; line-height: 1.5;">3）官网上说明可以用</span><font color="#ff0000" style="font-size: 10.5pt; line-height: 1.5;">start_port&nbsp;</font><span style="font-size: 10.5pt; line-height: 1.5;">这里试过，出现bug ,换成</span><font color="#ff0000" style="font-size: 10.5pt; line-height: 1.5;">bind_port</font><span style="font-size: 10.5pt; line-height: 1.5;">即可。</span><br></div><div><br></div><div>（ehcache.xml文件如下）</div><div><span style="color: rgb(42, 0, 255); font-family: Consolas; font-size: 21px; font-style: italic; line-height: 32px;"></span></div><div><div><!--WizRtf2Html Charset=0  --><span style="font-size:16pt;color:#008080;font-family:'Consolas';">&nbsp;&lt;?<span style="color:#3f7f7f;">xml<span style="color:WindowText;">&nbsp;<span style="color:#7f007f;">version<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"1.0"</span></span></span>&nbsp;<span style="color:#7f007f;">encoding<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"UTF-8"</span></span></span></span></span>?&gt;</span></div><div></div><div><span style="font-size:16pt;color:#008080;font-family:'Consolas';">&lt;<span style="color:#3f7f7f;">ehcache</span>&gt;</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">&lt;!--&nbsp;</span></span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;connect=TCP(bind_port=7800):</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TCPPING(initial_hosts=192.168.0.33[7800],192.168.0.91[7800];port_range=10;timeout=3000;</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_initial_members=3;up_thread=true;down_thread=true):</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VERIFY_SUSPECT(timeout=1500;down_thread=false;up_thread=false):</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pbcast.NAKACK(down_thread=true;up_thread=true;gc_lag=100;retransmit_timeout=3000):</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pbcast.GMS(join_timeout=5000;join_retry_timeout=2000;shun=false;</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print_local_addr=false;down_thread=true;up_thread=true)</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;TCP(bind_addr=2.222.222.222;bind_port=50061):TCPPING(initial_hosts=2.222.222.222[50061],node2HostAddr[node2StartPort];port_range=1;timeout=5000;num_initial_members=2):MERGE2(min_interval=3000;max_interval=5000):FD_ALL(interval=5000;timeout=20000):FD(timeout=5000;max_tries=48;):VERIFY_SUSPECT(timeout=1500):pbcast.NAKACK(retransmit_timeout=100,200,300,600,1200,2400,4800;discard_delivered_msgs=true):pbcast.STABLE(stability_delay=1000;desired_avg_gossip=20000;max_bytes=0):pbcast.GMS(print_local_addr=true;join_timeout=5000)</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">cacheManagerPeerProviderFactory</span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">class<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"net.sf.ehcache.distribution.jgroups.JGroupsCacheManagerPeerProviderFactory"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">properties<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"connect=TCP(bind_addr=192.168.0.33;bind_port=50061):TCPPING(initial_hosts=192.168.0.33[50061],192.168.0.91[50062];port_range=1;timeout=5000;num_initial_members=2):MERGE2(min_interval=3000;max_interval=5000):FD_ALL(interval=5000;timeout=20000):FD(timeout=5000;max_tries=48;):VERIFY_SUSPECT(timeout=1500):pbcast.NAKACK(retransmit_timeout=100,200,300,600,1200,2400,4800;discard_delivered_msgs=true):pbcast.STABLE(stability_delay=1000;desired_avg_gossip=20000;max_bytes=0):pbcast.GMS(print_local_addr=true;join_timeout=5000)"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">propertySeparator<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"::"</span></span></span>&nbsp;<span style="color:#008080;">/&gt;</span></span></div><div></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">defaultCache<span style="color:WindowText;">&nbsp;<span style="color:#7f007f;">maxElementsInMemory</span></span></span></span>=<span style="font-style:italic;color:#2a00ff;">"300000"<span style="font-style:normal;color:WindowText;">&nbsp;<span style="color:#7f007f;">eternal</span></span></span>=<span style="font-style:italic;color:#2a00ff;">"false"</span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">timeToIdleSeconds<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"259200000"</span></span></span>&nbsp;<span style="color:#7f007f;">memoryStoreEvictionPolicy<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"LRU"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">timeToLiveSeconds<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"259200000"<span style="font-style:normal;color:#008080;">&gt;</span></span></span></span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;/<span style="color:#3f7f7f;">defaultCache</span>&gt;</span></span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">cache<span style="color:WindowText;">&nbsp;<span style="color:#7f007f;">name</span></span></span></span>=<span style="font-style:italic;color:#2a00ff;">"book"<span style="font-style:normal;color:WindowText;">&nbsp;<span style="color:#7f007f;">maxElementsInMemory</span></span></span>=<span style="font-style:italic;color:#2a00ff;">"2147483647"<span style="font-style:normal;color:WindowText;">&nbsp;<span style="color:#7f007f;">eternal</span></span></span>=<span style="font-style:italic;color:#2a00ff;">"false"</span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">timeToIdleSeconds<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"259200000"</span></span></span>&nbsp;<span style="color:#7f007f;">memoryStoreEvictionPolicy<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"LRU"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">timeToLiveSeconds<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"259200000"<span style="font-style:normal;color:#008080;">&gt;</span></span></span></span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">cacheEventListenerFactory</span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">class<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"</span></span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">properties<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"replicateAsynchronously=true,&nbsp;replicatePuts=true,replicateUpdates=true,&nbsp;replicateUpdatesViaCopy=true,replicateRemovals=true"</span></span></span>&nbsp;<span style="color:#008080;">/&gt;</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;<span style="color:#3f7f7f;">bootstrapCacheLoaderFactory</span></span></span></div><div><span style="font-size:16pt;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7f007f;">class<span style="color:WindowText;">=<span style="font-style:italic;color:#2a00ff;">"net.sf.ehcache.distribution.jgroups.JGroupsBootstrapCacheLoaderFactory"</span></span></span>&nbsp;<span style="color:#008080;">/&gt;</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008080;">&lt;/<span style="color:#3f7f7f;">cache</span>&gt;</span></span></div><div></div><span style="font-size:16pt;color:#008080;font-family:'Consolas';">&lt;/<span style="color:#3f7f7f;">ehcache</span>&gt;</span>&nbsp;&nbsp;<br></div><div><br></div><div><br></div><div>附：java实现代码</div><div><span style="color: rgb(127, 0, 85); font-family: Consolas; font-size: 16pt; font-weight: bold; line-height: 1.5;">package</span><span style="font-family: Consolas; font-size: 16pt; line-height: 1.5; color: windowtext;">&nbsp;xw;</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;</span></div><div><span style="font-weight:bold;font-size:16pt;color:#7f0055;font-family:'Consolas';">import<span style="font-weight:normal;color:WindowText;">&nbsp;java.io.IOException;</span></span></div><div><span style="font-weight:bold;font-size:16pt;color:#7f0055;font-family:'Consolas';">import<span style="font-weight:normal;color:WindowText;">&nbsp;java.util.Date;</span></span></div><div><span style="font-weight:bold;font-size:16pt;color:#7f0055;font-family:'Consolas';">import<span style="font-weight:normal;color:WindowText;">&nbsp;java.util.List;</span></span></div><div><span style="font-weight:bold;font-size:16pt;color:#7f0055;font-family:'Consolas';">import<span style="font-weight:normal;color:WindowText;">&nbsp;java.util.Scanner;</span></span></div><div><span style="font-weight:bold;font-size:16pt;color:#7f0055;font-family:'Consolas';">import<span style="font-weight:normal;color:WindowText;">&nbsp;java.util.Timer;</span></span></div><div><span style="font-weight:bold;font-size:16pt;color:#7f0055;font-family:'Consolas';">import<span style="font-weight:normal;color:WindowText;">&nbsp;java.util.TimerTask;</span></span></div><div><span style="font-weight:bold;font-size:16pt;color:#7f0055;font-family:'Consolas';">import<span style="font-weight:normal;color:WindowText;">&nbsp;net.sf.ehcache.Cache;</span></span></div><div><span style="font-weight:bold;font-size:16pt;color:#7f0055;font-family:'Consolas';">import<span style="font-weight:normal;color:WindowText;">&nbsp;net.sf.ehcache.CacheManager;</span></span></div><div><span style="font-weight:bold;font-size:16pt;color:#7f0055;font-family:'Consolas';">import<span style="font-weight:normal;color:WindowText;">&nbsp;net.sf.ehcache.Element;</span></span></div><div><span style="font-weight:bold;font-size:16pt;color:#7f0055;font-family:'Consolas';">import<span style="font-weight:normal;color:WindowText;">&nbsp;xw.entity.Book;</span></span></div><div><span style="font-weight:bold;font-size:16pt;color:#7f0055;font-family:'Consolas';">import<span style="font-weight:normal;color:WindowText;">&nbsp;xw.entity.Order;</span></span></div><div></div><div><span style="font-weight:bold;font-size:16pt;color:#7f0055;font-family:'Consolas';">public<span style="font-weight:normal;color:WindowText;">&nbsp;</span>class<span style="font-weight:normal;color:WindowText;">&nbsp;Main&nbsp;{</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;CacheManager&nbsp;<span style="color:#0000c0;">manager</span>;<span style="color:#3f7f5f;">//缓存管理器</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;Cache&nbsp;<span style="color:#0000c0;">cache</span>;<span style="color:#3f7f5f;">//本程序操作的缓存对象</span></span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">public</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">static</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;main(String[]&nbsp;args)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Main&nbsp;main&nbsp;=&nbsp;<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Main();</span></div><div><span style="font-size:16pt;color:#3f7f5f;font-family:'Consolas';">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main.init(<span style="text-decoration:underline;">args</span>);//初始化缓存</span></div><div><span style="font-size:16pt;color:#3f7f5f;font-family:'Consolas';">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main.initJGourp_udp1();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main.initJGourpTpc1();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:#3f7f5f;font-family:'Consolas';">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main.initJGroup();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main.menu();<span style="color:#3f7f5f;">//显示菜单</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:#3f7f5f;font-family:'Consolas';">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main.addTest();</span></div><div><span style="font-size:16pt;color:#3f7f5f;font-family:'Consolas';">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main.initJGourpTpc1();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:#3f7f5f;font-family:'Consolas';">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main.addTest();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;<span style="text-decoration:underline;">initJGourp_udp1()</span>{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">manager</span>&nbsp;=&nbsp;CacheManager.<span style="font-style:italic;">newInstance</span>(getClass().getResourceAsStream(<span style="color:#2a00ff;">"/config/ehcache-jgroups_udp.xml"</span>));</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">cache</span>&nbsp;=&nbsp;<span style="color:#0000c0;">manager</span>.getCache(<span style="color:#2a00ff;">"book"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;initJGourpTpc1(){</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">manager</span>&nbsp;=&nbsp;CacheManager.<span style="font-style:italic;">newInstance</span>(getClass().getResourceAsStream(<span style="color:#2a00ff;">"/config/ehcache-jgroup-tpc1.xml"</span>));</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">cache</span>&nbsp;=&nbsp;<span style="color:#0000c0;">manager</span>.getCache(<span style="color:#2a00ff;">"book"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;<span style="text-decoration:underline;">initJGroup()</span>{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">manager</span>&nbsp;=&nbsp;CacheManager.<span style="font-style:italic;">newInstance</span>(getClass().getResourceAsStream(<span style="color:#2a00ff;">"/config/ehcache-jgroup.xml"</span>));</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">cache</span>&nbsp;=&nbsp;<span style="color:#0000c0;">manager</span>.getCache(<span style="color:#2a00ff;">"book"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">/**</span></span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;初始化</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;<span style="text-decoration:underline;">init(String[]&nbsp;path)</span>&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f7f5f;">//指定ehcache.xml的位置</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">manager</span>&nbsp;=&nbsp;CacheManager.<span style="font-style:italic;">newInstance</span>(getClass().getResourceAsStream(<span style="color:#2a00ff;">"/config/ehcache-default.xml"</span>));<span style="color:#3f7f5f;">//new&nbsp;CacheManager(fileName);</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#0000c0;">manager</span>.getActiveConfigurationText());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f7f5f;">//取出所有的cacheName</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;names[]&nbsp;=&nbsp;<span style="color:#0000c0;">manager</span>.getCacheNames();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">for</span>&nbsp;(String&nbsp;name&nbsp;:&nbsp;names)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(name);<span style="color:#3f7f5f;">//输出所有Cache名称</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">cache</span>&nbsp;=&nbsp;<span style="color:#0000c0;">manager</span>.getCache(<span style="color:#2a00ff;">"book"</span>);<span style="color:#3f7f5f;">//得到本程序操作的cache</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">/**</span></span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;添加缓存</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;addTest()&nbsp;{&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;key&nbsp;=&nbsp;<span style="color:#2a00ff;">"张三"</span>;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;value&nbsp;=&nbsp;<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Book(key,<span style="color:#2a00ff;">"test"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element&nbsp;e&nbsp;=&nbsp;<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Element(key,&nbsp;value);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">cache</span>.put(e);&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Book&nbsp;b&nbsp;=&nbsp;(Book)<span style="color:#0000c0;">cache</span>.get(key).getObjectValue();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(b.getName());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:#3f7f5f;font-family:'Consolas';">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println("成功：KEY:"&nbsp;+&nbsp;<span style="text-decoration:underline;">bookno</span>&nbsp;+&nbsp;"-&gt;value:"&nbsp;+&nbsp;cache.get(<span style="text-decoration:underline;">bookno</span>).getObjectValue().toString());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;menu()&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;menuItemTop();<span style="color:#3f7f5f;">//显示顶层菜单</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f7f5f;">//子菜单</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">/**</span></span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;显示顶层菜单</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;menuItemTop()&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Scanner&nbsp;<span style="text-decoration:underline;">s</span>&nbsp;=&nbsp;<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Scanner(System.<span style="font-style:italic;color:#0000c0;">in</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"1,添加缓存"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"2,获取一个缓存"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"3,查看缓存数量"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"4,监控缓存数量(按T退出)"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"5,批量添加数据"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"6,测试命中"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"7,批量添加数据(Order&nbsp;20列)"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"C,清空缓存"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"Q,退出"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;str&nbsp;=&nbsp;s.next();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">try</span>&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">switch</span>&nbsp;(str)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">case</span>&nbsp;<span style="color:#2a00ff;">"1"</span>:</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add();<span style="color:#3f7f5f;">//添加缓存</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">break</span>;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">case</span>&nbsp;<span style="color:#2a00ff;">"2"</span>:</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get();<span style="color:#3f7f5f;">//获取一个缓存</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">break</span>;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">case</span>&nbsp;<span style="color:#2a00ff;">"3"</span>:</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getAll();<span style="color:#3f7f5f;">//查看缓存数量</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">break</span>;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">case</span>&nbsp;<span style="color:#2a00ff;">"4"</span>:</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;monitoring();<span style="color:#3f7f5f;">//监控缓存数量(不能退出)</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">break</span>;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">case</span>&nbsp;<span style="color:#2a00ff;">"5"</span>:</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addSomeBooks();<span style="color:#3f7f5f;">//批量添加数据</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">break</span>;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">case</span>&nbsp;<span style="color:#2a00ff;">"6"</span>:</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;testHitCount();<span style="color:#3f7f5f;">//测试命中</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">break</span>;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">case</span>&nbsp;<span style="color:#2a00ff;">"7"</span>:</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addSomeOrders();<span style="color:#3f7f5f;">//批量添加数据(Order&nbsp;20列)</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">break</span>;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">case</span>&nbsp;<span style="color:#2a00ff;">"C"</span>:</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;claerCache();<span style="color:#3f7f5f;">//清空缓存</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">break</span>;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">case</span>&nbsp;<span style="color:#2a00ff;">"Q"</span>:</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;closs();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;">exit</span>(0);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">break</span>;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">case</span>&nbsp;<span style="color:#2a00ff;">"ADD"</span>:</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addTest();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">break</span>;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">case</span>&nbsp;<span style="color:#2a00ff;">"GET"</span>:</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;testGet();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">break</span>;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">default</span>:</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">break</span>;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="font-weight:bold;color:#7f0055;">catch</span>&nbsp;(Exception&nbsp;e)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;menu();<span style="color:#3f7f5f;">//显示菜单</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;testGet(){</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;key&nbsp;=&nbsp;<span style="color:#2a00ff;">"张三"</span>;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Book&nbsp;&nbsp;b&nbsp;=&nbsp;(Book)<span style="color:#0000c0;">cache</span>.get(key).getObjectValue();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(b.getName());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;claerCache()&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"缓存个数为："</span>&nbsp;+&nbsp;<span style="color:#0000c0;">cache</span>.getSize());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">cache</span>.removeAll();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">cache</span>.flush();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"缓存个数为："</span>&nbsp;+&nbsp;<span style="color:#0000c0;">cache</span>.getSize());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">/**</span></span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;批量添加数据(Order&nbsp;20列)</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;addSomeOrders()&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Scanner&nbsp;<span style="text-decoration:underline;">s</span>&nbsp;=&nbsp;<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Scanner(System.<span style="font-style:italic;color:#0000c0;">in</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"添加多少个缓存:"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">long</span>&nbsp;number&nbsp;=&nbsp;s.nextLong();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">long</span>&nbsp;see&nbsp;=&nbsp;System.<span style="font-style:italic;">currentTimeMillis</span>();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"种子为:"</span>&nbsp;+&nbsp;see);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">long</span>&nbsp;start&nbsp;=&nbsp;System.<span style="font-style:italic;">currentTimeMillis</span>();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">for</span>&nbsp;(<span style="font-weight:bold;color:#7f0055;">long</span>&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;number;&nbsp;i++)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Order&nbsp;order&nbsp;=&nbsp;<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Order();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setOrderno(see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;i);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setType(1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setApproveuser(<span style="color:#2a00ff;">"用户"</span>&nbsp;+&nbsp;see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setApuser(<span style="color:#2a00ff;">"用户"</span>&nbsp;+&nbsp;see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setConsigneeaddress(<span style="color:#2a00ff;">"地址"</span>&nbsp;+&nbsp;see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setNote(<span style="font-weight:bold;color:#7f0055;">false</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setCrtime(<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Date());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setCruser(<span style="color:#2a00ff;">"用户"</span>&nbsp;+&nbsp;see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setRetono(<span style="color:#2a00ff;">"订单"</span>&nbsp;+&nbsp;see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setWhcode(<span style="color:#2a00ff;">"仓库"</span>&nbsp;+&nbsp;see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setStorecode(<span style="color:#2a00ff;">"门店"</span>&nbsp;+&nbsp;see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setExpresscode(<span style="color:#2a00ff;">"邮编"</span>&nbsp;+&nbsp;see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setExpressnumber(<span style="color:#2a00ff;">"快递"</span>&nbsp;+&nbsp;see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setMobile(<span style="color:#2a00ff;">"13800138000"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setConsigneeaddress(<span style="color:#2a00ff;">"固定地址"</span>&nbsp;+&nbsp;see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setConsigneename(<span style="color:#2a00ff;">"编码"</span>&nbsp;+&nbsp;see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setShopcode(<span style="color:#2a00ff;">"商店"</span>&nbsp;+&nbsp;see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setShopname(<span style="color:#2a00ff;">"商店名称"</span>&nbsp;+&nbsp;see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setTradeid(see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order.setReceivedfee(<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Double(i));</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">cache</span>.put(<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Element(order.getOrderno(),&nbsp;order));</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">long</span>&nbsp;end&nbsp;=&nbsp;System.<span style="font-style:italic;">currentTimeMillis</span>();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"花费时间："</span>&nbsp;+&nbsp;(end&nbsp;-&nbsp;start));</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">/**</span></span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;测试命中</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;testHitCount()&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Scanner&nbsp;<span style="text-decoration:underline;">s</span>&nbsp;=&nbsp;<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Scanner(System.<span style="font-style:italic;color:#0000c0;">in</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"bookno:"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;bookno&nbsp;=&nbsp;s.next();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">for</span>&nbsp;(<span style="font-weight:bold;color:#7f0055;">int</span>&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;10000;&nbsp;i++)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">cache</span>.get(bookno).getObjectValue().toString();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#0000c0;">cache</span>.get(bookno).getHitCount());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">/**</span></span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;批量添加缓存</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;addSomeBooks()&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Scanner&nbsp;<span style="text-decoration:underline;">s</span>&nbsp;=&nbsp;<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Scanner(System.<span style="font-style:italic;color:#0000c0;">in</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"添加多少个缓存:"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">long</span>&nbsp;number&nbsp;=&nbsp;s.nextLong();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">long</span>&nbsp;see&nbsp;=&nbsp;System.<span style="font-style:italic;">currentTimeMillis</span>();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"种子为:"</span>&nbsp;+&nbsp;see);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">long</span>&nbsp;start&nbsp;=&nbsp;System.<span style="font-style:italic;">currentTimeMillis</span>();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">for</span>&nbsp;(<span style="font-weight:bold;color:#7f0055;">long</span>&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;number;&nbsp;i++)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Book&nbsp;book&nbsp;=&nbsp;<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Book();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;book.setName(<span style="color:#2a00ff;">"书名"</span>&nbsp;+&nbsp;see&nbsp;+&nbsp;i);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;book.setAuthor(<span style="color:#2a00ff;">"作者"</span>&nbsp;+&nbsp;i);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;book.setBookno(see&nbsp;+&nbsp;<span style="color:#2a00ff;">""</span>&nbsp;+&nbsp;i);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;book.setPrice(<span style="color:#2a00ff;">"100"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">cache</span>.put(<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Element(book.getBookno(),&nbsp;book));</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">long</span>&nbsp;end&nbsp;=&nbsp;System.<span style="font-style:italic;">currentTimeMillis</span>();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"花费时间："</span>&nbsp;+&nbsp;(end&nbsp;-&nbsp;start));</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">/**</span></span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;监控缓存数量(不能退出)</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;monitoring()&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Timer&nbsp;timer&nbsp;=&nbsp;<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Timer();<span style="color:#3f7f5f;">//定时器</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer.schedule(<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;TimerTask()&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#646464;">@Override</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">public</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;run()&nbsp;{<span style="color:#3f7f5f;">//定时&nbsp;操作&nbsp;:&nbsp;查看缓存个数</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;names[]&nbsp;=&nbsp;<span style="color:#0000c0;">manager</span>.getCacheNames();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">for</span>&nbsp;(String&nbsp;name&nbsp;:&nbsp;names)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cache&nbsp;cache&nbsp;=&nbsp;<span style="color:#0000c0;">manager</span>.getCache(name);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"缓存中的对象数："</span>&nbsp;+&nbsp;cache.getSize());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f7f5f;">//得到缓存对象占用内存的大小</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"缓存对象占用内存:"</span>&nbsp;+&nbsp;cache.<span style="text-decoration:underline;">getMemoryStoreSize()</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f7f5f;">//得到缓存读取的命中次数</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"缓存读取的命中次数:"</span>&nbsp;+&nbsp;cache.getStatistics().cacheHitCount());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f7f5f;">//得到缓存读取的错失次数</span></span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"缓存读取的错失次数:"</span>&nbsp;+&nbsp;cache.getStatistics().cacheMissCount());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;1L,&nbsp;1000&nbsp;*&nbsp;3l);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">while</span>&nbsp;(<span style="font-weight:bold;color:#7f0055;">true</span>)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">try</span>&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">int</span>&nbsp;str&nbsp;=&nbsp;System.<span style="font-style:italic;color:#0000c0;">in</span>.read();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">if</span>&nbsp;(str&nbsp;==&nbsp;(<span style="font-weight:bold;color:#7f0055;">int</span>)&nbsp;<span style="color:#2a00ff;">'T'</span>)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer.cancel();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">break</span>;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="font-weight:bold;color:#7f0055;">catch</span>&nbsp;(IOException&nbsp;e)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">/**</span></span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;//查看缓存数量</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;getAll()&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;names[]&nbsp;=&nbsp;<span style="color:#0000c0;">manager</span>.getCacheNames();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">for</span>&nbsp;(String&nbsp;name&nbsp;:&nbsp;names)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cache&nbsp;cache&nbsp;=&nbsp;<span style="color:#0000c0;">manager</span>.getCache(name);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"缓存个数为："</span>&nbsp;+&nbsp;cache.getSize());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;String&gt;&nbsp;list&nbsp;=&nbsp;<span style="text-decoration:underline;">cache.getKeys()</span>;</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">if</span>&nbsp;(list.size()&nbsp;&gt;&nbsp;100)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"由于缓存数量太多，只输出100条"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">for</span>&nbsp;(<span style="font-weight:bold;color:#7f0055;">int</span>&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;100;&nbsp;i++)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(cache.get(list.get(i)).getObjectValue().toString());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"由于缓存数量太多，只输出100条"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="font-weight:bold;color:#7f0055;">else</span>&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">for</span>&nbsp;(String&nbsp;s&nbsp;:&nbsp;list)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(cache.get(s).getObjectValue().toString());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"缓存个数为："</span>&nbsp;+&nbsp;cache.getSize());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">/**</span></span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;获取一个缓存</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;get()&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Scanner&nbsp;<span style="text-decoration:underline;">s</span>&nbsp;=&nbsp;<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Scanner(System.<span style="font-style:italic;color:#0000c0;">in</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"KEY:"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;key&nbsp;=&nbsp;s.next();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element&nbsp;element&nbsp;=&nbsp;<span style="color:#0000c0;">cache</span>.get(key);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">if</span>&nbsp;(element&nbsp;!=&nbsp;<span style="font-weight:bold;color:#7f0055;">null</span>)&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;s1&nbsp;=&nbsp;element.getObjectValue().toString();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"成功：key:"</span>&nbsp;+&nbsp;key&nbsp;+&nbsp;<span style="color:#2a00ff;">"-&gt;value:"</span>&nbsp;+&nbsp;s1);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"命中："</span>&nbsp;+&nbsp;element.getHitCount());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3f5fbf;">/**</span></span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;添加缓存</span></div><div><span style="font-size:16pt;color:#3f5fbf;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;add()&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Scanner&nbsp;<span style="text-decoration:underline;">s</span>&nbsp;=&nbsp;<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Scanner(System.<span style="font-style:italic;color:#0000c0;">in</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"KEY:"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;bookno&nbsp;=&nbsp;s.next();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"NAME:"</span>);</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;name&nbsp;=&nbsp;s.next();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">cache</span>.put(<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Element(bookno,&nbsp;<span style="font-weight:bold;color:#7f0055;">new</span>&nbsp;Book(bookno,&nbsp;name)));</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.<span style="font-style:italic;color:#0000c0;">out</span>.println(<span style="color:#2a00ff;">"成功：KEY:"</span>&nbsp;+&nbsp;bookno&nbsp;+&nbsp;<span style="color:#2a00ff;">"-&gt;value:"</span>&nbsp;+&nbsp;<span style="color:#0000c0;">cache</span>.get(bookno).getObjectValue().toString());</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight:bold;color:#7f0055;">private</span>&nbsp;<span style="font-weight:bold;color:#7f0055;">void</span>&nbsp;closs()&nbsp;{</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0000c0;">manager</span>.shutdown();</span></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div></div><div></div><div><span style="font-size:16pt;color:WindowText;font-family:'Consolas';">}</span></div><div><br></div></body></html>