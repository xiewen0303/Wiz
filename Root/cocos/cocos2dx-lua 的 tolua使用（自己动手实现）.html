<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>cocos2dx-lua 的 tolua使用（自己动手实现）</title>
    <!--mark |wiz_custom_css| for wizeditor replace it-->


<style id="wiz_custom_css">        html, body {            font-size: 15px;        }        body {            font-family: Helvetica, 'Hiragino Sans GB', '微软雅黑', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;            line-height: 1.6;            margin: 0;            padding: 20px 36px;            padding: 1.33rem 2.4rem;        }        h1, h2, h3, h4, h5, h6 {            margin: 20px 0 10px;            margin: 1.33rem 0 0.667rem;            padding: 0;            font-weight: bold;        }        h1 {            font-size: 21px;            font-size: 1.4rem;        }        h2 {            font-size: 20px;            font-size: 1.33rem;        }        h3 {            font-size: 18px;            font-size: 1.2rem;        }        h4 {            font-size: 17px;            font-size: 1.13rem;        }        h5 {            font-size: 15px;            font-size: 1rem;        }        h6 {            font-size: 15px;            font-size: 1rem;            color: #777777;            margin: 1rem 0;        }        div, p, ul, ol, dl, li {            margin: 0;        }        blockquote, table, pre, code {            margin: 8px 0;        }        ul, ol {            padding-left: 32px;            padding-left: 2.13rem;        }        blockquote {            padding: 0 12px;            padding: 0 0.8rem;        }        blockquote > :first-child {            margin-top: 0;        }        blockquote > :last-child {            margin-bottom: 0;        }        img {            border: 0;            max-width: 100%;            height: auto !important;            margin: 2px 0;        }        table {            border-collapse: collapse;            border: 1px solid #bbbbbb;        }        td {            padding: 4px 8px;            border-collapse: collapse;            border: 1px solid #bbbbbb;        }        @media screen and (max-width: 660px) {            body {                padding: 20px 18px;                padding: 1.33rem 1.2rem;            }        }        @media only screen and (-webkit-max-device-width: 1024px), only screen and (-o-max-device-width: 1024px), only screen and (max-device-width: 1024px), only screen and (-webkit-min-device-pixel-ratio: 3), only screen and (-o-min-device-pixel-ratio: 3), only screen and (min-device-pixel-ratio: 3) {            html, body {                font-size: 17px;            }            body {                line-height: 1.7;                padding: 0.75rem 0.9375rem;                color: #353c47;            }            h1 {                font-size: 2.125rem;            }            h2 {                font-size: 1.875rem;            }            h3 {                font-size: 1.625rem;            }            h4 {                font-size: 1.375rem;            }            h5 {                font-size: 1.125rem;            }            h6 {                color: inherit;            }            ul, ol {                padding-left: 2.5rem;            }            blockquote {                padding: 0 0.9375rem;            }        }</style><style type="text/css" id="wiz_todo_style_id" wiz_link_version="01.00.09">.wiz-todo, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { display: inline-block; padding-top: 7px; padding-bottom: 6px; line-height: 1.5;} .wiz-todo-label-checked {  color: #666;} .wiz-todo-label-unchecked {text-decoration: initial;} .wiz-todo-completed-info {padding-left: 44px; display: inline-block; } .wiz-todo-avatar { width:20px; height: 20px; vertical-align: -20%; margin-right:10px; border-radius: 2px;} .wiz-todo-account, .wiz-todo-dt { color: #666; }</style></head>

<body  style="">1：使用版本：cocos2dx-lua &nbsp;3.4版本。<div>2：python-2.7.3.msi</div><div>3：PyYAML-3.10.win32-py2.7.exe、Cheetah.zip</div><div>4：vs2013</div><div>5：android-ndk-r9b</div><div><div></div><div>&nbsp;* Make sure that you have installed `android-ndk-r9b`.</div><div>* Download python2.7.3 (32bit) from (http://www.python.org/ftp/python/2.7.3/python-2.7.3.msi).</div><div>* Add the installed path of python (e.g. C:\Python27) to windows environment variable named 'PATH'.</div><div>* Download pyyaml from http://pyyaml.org/download/pyyaml/PyYAML-3.10.win32-py2.7.exe and install it.</div><div>* Download pyCheetah from https://raw.github.com/dumganhar/my_old_cocos2d-x_backup/download/downloads/Cheetah.zip, unzip it to "C:\Python27\Lib\site-packages"</div><div>* Set environment variables (`NDK_ROOT`)</div><div>* Go to "cocos2d-x/tools/tolua" folder, and run "genbindings.py". The generated codes will be under "cocos\scripting\auto-generated\js-bindings".</div></div><div>说明在如路径的README.mdown文件里面有不同平台的说明。</div><div><img src="cocos2dx-lua 的 tolua使用（自己动手实现）_files/662a421d-ec06-40e9-b780-db581b3c506a.png" border="0" alt=""><br></div><div><br></div><div><br></div><div><br></div><div><b><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;">方法一：直接在AppDelegate.cpp中添加方法注册。</span></b></div><div><br></div><div>添加如下代码：</div><div><div><!--WizRtf2Html Charset=0  --><span style="font-size: 14pt; font-family: NSimSun; background-color: rgb(255, 255, 255);"><font color="#282828">int&nbsp;test_lua_bind(lua_State*&nbsp;L)</font></span></div><div><span style="font-size: 14pt; font-family: NSimSun; background-color: rgb(255, 255, 255);"><font color="#282828">{</font></span></div><div><span style="font-size: 14pt; font-family: NSimSun; background-color: rgb(255, 255, 255);"><font color="#282828">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;number&nbsp;=&nbsp;lua_tonumber(L,&nbsp;1);</font></span></div><div><span style="font-size: 14pt; font-family: NSimSun; background-color: rgb(255, 255, 255);"><font color="#282828">&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;=&nbsp;number&nbsp;+&nbsp;1;</font></span></div><div><span style="font-size: 14pt; font-family: NSimSun; background-color: rgb(255, 255, 255);"><font color="#282828">&nbsp;&nbsp;&nbsp;&nbsp;lua_pushnumber(L,&nbsp;number);</font></span></div><div><span style="font-size: 14pt; font-family: NSimSun; background-color: rgb(255, 255, 255);"><font color="#282828">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1;</font></span></div><span style="background-color: rgb(255, 255, 255);"><font color="#282828"><span style="font-size: 14pt; font-family: NSimSun;">}</span>&nbsp;&nbsp;</font></span></div><div><span style="color: rgb(40, 40, 40); background-color: rgb(255, 255, 255); line-height: 1.6;">&nbsp;</span></div><div><!--WizRtf2Html Charset=0  --><font color="#282828"><span style="background-color: rgb(255, 255, 255);"><span style="font-size: 14pt; font-family: NSimSun;">lua_register(L,"test_lua_bind",test_lua_bind);</span>&nbsp;&nbsp;</span><br></font></div><div><font color="#282828"><span style="background-color: rgb(255, 255, 255);"><br></span></font></div><div><font color="#282828"><span style="background-color: rgb(255, 255, 255);">具体位置如下截图：</span></font></div><div><img src="cocos2dx-lua 的 tolua使用（自己动手实现）_files/ac4cd42d-467b-4f34-baf3-84b7ff1ebfc7.png" border="0" alt="" name=""><br></div><div><br></div><div><img src="cocos2dx-lua 的 tolua使用（自己动手实现）_files/6bc1e16a-4e5a-45e5-b0de-831db731bf44.png" border="0" alt=""><br></div><div>注意 test_lua_bind方法写在调用的前面，c++代码重上向下编译的。</div><div><br></div><div><br></div><div>然后在lua中可以调用了。</div><div>lua代码：</div><div><div><!--WizRtf2Html Charset=0  --><span style="font-family: NSimSun; line-height: 1.6;">&nbsp; &nbsp;&nbsp;</span><span style="font-family: NSimSun; line-height: 1.6;">&nbsp; </span><span style="color: rgb(40, 40, 40); background-color: rgb(255, 255, 255); font-family: NSimSun; font-size: 14pt; line-height: 1.6;">local</span><span style="color: rgb(40, 40, 40); background-color: rgb(255, 255, 255); font-family: NSimSun; font-size: 14pt; line-height: 1.6;">&nbsp;i&nbsp;=&nbsp;test_lua_bind(</span><span style="color: rgb(40, 40, 40); background-color: rgb(255, 255, 255); font-family: NSimSun; font-size: 14pt; line-height: 1.6;">99</span><span style="color: rgb(40, 40, 40); background-color: rgb(255, 255, 255); font-family: NSimSun; font-size: 14pt; line-height: 1.6;">)</span></div><span style="background-color: rgb(255, 255, 255);"><font color="#282828"><span style="font-size: 14pt; font-family: NSimSun;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print("lua&nbsp;bind:&nbsp;"&nbsp;..&nbsp;tostring(i))</span>&nbsp;&nbsp;</font></span><br></div><div><span style="background-color: rgb(255, 255, 255);"><font color="#282828"><br></font></span></div><div><span style="background-color: rgb(255, 255, 255);"><font color="#282828"><br></font></span></div><div><span style="background-color: rgb(255, 255, 255);"><font color="#282828"><br></font></span></div><div><b><span style="background-color: rgb(255, 255, 255);"><font color="#282828"><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;">第二：</span></font></span><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif; font-size: 14px; line-height: 22px; orphans: 2; widows: 2;"><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;">cocos2d-x 的 bindings-generator脚本来封装toLua++</span></span></b></div><div style="orphans: 2; widows: 2;"><font color="#333333" face="Helvetica Neue, Helvetica, Arial, PingFang SC, Hiragino Sans GB, WenQuanYi Micro Hei, Microsoft Yahei, sans-serif"><span style="font-size: 20px; line-height: 22px;"><span data-wiz-span="data-wiz-span" style="font-size: 1rem;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;">1：安装android的ndk环境</span></b></span><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;">，</span></span></font></div><div style="orphans: 2; widows: 2;"><font color="#333333" face="Helvetica Neue, Helvetica, Arial, PingFang SC, Hiragino Sans GB, WenQuanYi Micro Hei, Microsoft Yahei, sans-serif"><span style="font-size: 20px; line-height: 22px;"><span data-wiz-span="data-wiz-span" style="font-size: 1rem;">&nbsp;&nbsp;下载</span></span><span style="font-size: 14px; line-height: 22px;"><span data-wiz-span="data-wiz-span" style="font-size: 1rem;">android-ndk-r9b-windows-x86_64.zip</span></span></font><span style="line-height: 1.6;"><span data-wiz-span="data-wiz-span" style="font-size: 1rem;">,文件，然后解压，</span></span></div><div style="orphans: 2; widows: 2;"><span style="line-height: 1.6;"><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;"><b>2：将ndk添加到环境中去，如图</b></span>：</span><img src="cocos2dx-lua 的 tolua使用（自己动手实现）_files/07d78bad-a2d9-4969-8253-cb4a5eba08fe.png" border="0" alt="" style="line-height: 1.6;" name=""></div><div><b><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif; font-size: 14px; line-height: 22px; orphans: 2; widows: 2;"><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;"><br></span></span></b></div><div style="orphans: 2; widows: 2;"><font color="#333333" face="Helvetica Neue, Helvetica, Arial, PingFang SC, Hiragino Sans GB, WenQuanYi Micro Hei, Microsoft Yahei, sans-serif"><span style="font-size: 20px; line-height: 22px;"><b>3:添加一个自定义的c++文件,如下：</b></span></font></div><div style="orphans: 2; widows: 2;"><img src="cocos2dx-lua 的 tolua使用（自己动手实现）_files/660ae5e1-2d4c-464f-ac21-8740050bc974.png" border="0" alt=""><font color="#333333" face="Helvetica Neue, Helvetica, Arial, PingFang SC, Hiragino Sans GB, WenQuanYi Micro Hei, Microsoft Yahei, sans-serif"><span style="font-size: 20px; line-height: 22px;"><b><br></b></span></font></div><div style="orphans: 2; widows: 2;"><br></div><div style="orphans: 2; widows: 2;"><font color="#333333" face="Helvetica Neue, Helvetica, Arial, PingFang SC, Hiragino Sans GB, WenQuanYi Micro Hei, Microsoft Yahei, sans-serif"><span style="font-size: 20px; line-height: 22px;"><span data-wiz-span="data-wiz-span" style="font-size: 1rem;">头文件</span></span></font></div><div style="orphans: 2; widows: 2;"><div><!--WizRtf2Html Charset=0  --><span style="font-size: 14pt; color: rgb(155, 155, 155); font-family: NSimSun; background-color: rgb(255, 255, 255);">#include<span style="color: rgb(220, 220, 220);">&nbsp;<span style="color:#d69d85;">"cocos2d.h"</span></span></span></div><div></div><div><span style="font-size: 14pt; color: rgb(86, 156, 214); font-family: NSimSun; background-color: rgb(255, 255, 255);">using<span style="color:#dcdcdc;">&nbsp;</span>namespace<span style="color:#dcdcdc;">&nbsp;<span style="color:#c8c8c8;">cocos2d<span style="color:#b4b4b4;">;</span></span></span></span></div><div></div><div></div><div><span style="font-size: 14pt; color: rgb(86, 156, 214); font-family: NSimSun; background-color: rgb(255, 255, 255);">class<span style="color:#dcdcdc;">&nbsp;<span style="color:#4ec9b0;">MyClass</span>&nbsp;<span style="color:#b4b4b4;">:</span>&nbsp;</span>public<span style="color:#dcdcdc;">&nbsp;<span style="color:#4ec9b0;">Ref</span></span></span></div><div><span style="font-size: 14pt; color: rgb(180, 180, 180); font-family: NSimSun; background-color: rgb(255, 255, 255);">{</span></div><div><span style="font-size: 14pt; color: rgb(86, 156, 214); font-family: NSimSun; background-color: rgb(255, 255, 255);">public<span style="color:#b4b4b4;">:</span></span></div><div><span style="font-size: 14pt; color: rgb(220, 220, 220); font-family: NSimSun; background-color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c8c8c8;">MyClass<span style="color:#b4b4b4;">(){};</span></span></span></div><div><span style="font-size: 14pt; color: rgb(220, 220, 220); font-family: NSimSun; background-color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c8c8c8;">~MyClass<span style="color:#b4b4b4;">(){};</span></span></span></div><div><span style="font-size: 14pt; color: rgb(220, 220, 220); font-family: NSimSun; background-color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">bool</span>&nbsp;<span style="color:#c8c8c8;">init<span style="color:#b4b4b4;">(){</span></span>&nbsp;<span style="color:#569cd6;">return</span>&nbsp;<span style="color:#569cd6;">true<span style="color:#b4b4b4;">;};</span></span></span></div><div><span style="font-size: 14pt; color: rgb(220, 220, 220); font-family: NSimSun; background-color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#bd63c5;">CREATE_FUNC<span style="color:#b4b4b4;">(<span style="color:#4ec9b0;">MyClass</span>);</span></span></span></div><div></div><div><span style="font-size: 14pt; color: rgb(220, 220, 220); font-family: NSimSun; background-color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">int</span>&nbsp;<span style="color:#c8c8c8;">foo<span style="color:#b4b4b4;">(<span style="color:#569cd6;">int</span></span></span>&nbsp;i<span style="color:#b4b4b4;">);</span></span></div><span style="background-color: rgb(255, 255, 255);"><span style="font-size: 14pt; color: rgb(180, 180, 180); font-family: NSimSun;">};</span>&nbsp;</span></div><div style="orphans: 2; widows: 2;"><span style="background-color: rgb(255, 255, 255);"><br></span></div><div style="orphans: 2; widows: 2;"><span style="background-color: rgb(255, 255, 255);">具体实现&nbsp;<font color="#333333" face="Helvetica Neue, Helvetica, Arial, PingFang SC, Hiragino Sans GB, WenQuanYi Micro Hei, Microsoft Yahei, sans-serif"><span style="font-size: 20px; line-height: 22px;"><b><br></b></span></font></span></div><div><div><!--WizRtf2Html Charset=0  --><span style="font-size: 14pt; color: rgb(155, 155, 155); font-family: NSimSun; background-color: rgb(255, 255, 255);">#include<span style="color:#dcdcdc;">&nbsp;<span style="color:#d69d85;">"MyClass.h"</span></span></span></div><div></div><div><span style="font-size: 14pt; color: rgb(86, 156, 214); font-family: NSimSun; background-color: rgb(255, 255, 255);">int<span style="color:#dcdcdc;">&nbsp;<span style="color:#4ec9b0;">MyClass<span style="color:#b4b4b4;">::<span style="color:#c8c8c8;">foo</span>(</span></span></span>int<span style="color:#dcdcdc;">&nbsp;<span style="color:#7f7f7f;">i<span style="color:#b4b4b4;">){</span></span></span></span></div><div><span style="font-size: 14pt; color: rgb(220, 220, 220); font-family: NSimSun; background-color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">return</span>&nbsp;<span style="color:#7f7f7f;">i</span>&nbsp;<span style="color:#b4b4b4;">+</span>&nbsp;<span style="color:#b5cea8;">100<span style="color:#b4b4b4;">;</span></span></span></div><span style="background-color: rgb(255, 255, 255);"><span style="font-size: 14pt; color: rgb(180, 180, 180); font-family: NSimSun;">}</span>&nbsp;&nbsp;</span><b><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif; font-size: 14px; line-height: 22px; orphans: 2; widows: 2;"><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;"><br></span></span></b></div><div><br></div><div><b><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;">4：添加自定义的MyClass.ini文件：如下</span></b></div><div><div>[MyClass]</div><div># the prefix to be added to the generated functions. You might or might not use this in your own</div><div># templates</div><div>prefix = MyClass</div><div><br></div><div># create a target namespace (in javascript, this would create some code like the equiv. to `ns = ns || {}`)</div><div># all classes will be embedded in that namespace</div><div>target_namespace = my</div><div><br></div><div>android_headers = -I%(androidndkdir)s/platforms/android-14/arch-arm/usr/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.7/libs/armeabi-v7a/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.7/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.8/libs/armeabi-v7a/include -I%(androidndkdir)s/sources/cxx-stl/gnu-libstdc++/4.8/include</div><div>android_flags = -D_SIZE_T_DEFINED_&nbsp;</div><div><br></div><div>clang_headers = -I%(clangllvmdir)s/lib/clang/3.3/include&nbsp;</div><div>clang_flags = -nostdinc -x c++ -std=c++11 -U __SSE__</div><div><br></div><div>cocos_headers = -I%(cocosdir)s/cocos -I%(cocosdir)s/cocos/platform/android -I%(cocosdir)s/cocos/editor-support -I%(cocosdir)s/external</div><div>cocos_flags = -DANDROID</div><div><br></div><div>cxxgenerator_headers =&nbsp;</div><div><br></div><div># extra arguments for clang</div><div>extra_arguments = %(android_headers)s %(clang_headers)s %(cxxgenerator_headers)s %(cocos_headers)s %(android_flags)s %(clang_flags)s %(cocos_flags)s %(extra_flags)s&nbsp;</div><div><br></div><div># what headers to parse</div><div>headers = %(cocosdir)s/../runtime-src/Classes/MyClass.h</div><div><br></div><div># what classes to produce code for. You can use regular expressions here. When testing the regular</div><div># expression, it will be enclosed in "^$", like this: "^Menu*$".</div><div>classes = MyClass</div><div><br></div><div># what should we skip? in the format ClassName::[function function]</div><div># ClassName is a regular expression, but will be used like this: "^ClassName$" functions are also</div><div># regular expressions, they will not be surrounded by "^$". If you want to skip a whole class, just</div><div># add a single "*" as functions. See bellow for several examples. A special class name is "*", which</div><div># will apply to all class names. This is a convenience wildcard to be able to skip similar named</div><div># functions from all classes.</div><div><br></div><div>skip =&nbsp;</div><div><br></div><div>rename_functions =&nbsp;</div><div><br></div><div>rename_classes =&nbsp;</div><div><br></div><div># for all class names, should we remove something when registering in the target VM?</div><div>remove_prefix =&nbsp;</div><div><br></div><div># classes for which there will be no "parent" lookup</div><div>classes_have_no_parents =</div><div><br></div><div># base classes which will be skipped when their sub-classes found them.</div><div>base_classes_to_skip =&nbsp;</div><div><br></div><div># classes that create no constructor</div><div># Set is special and we will use a hand-written constructor</div><div>abstract_classes =</div><div><br></div><div># Determining whether to use script object(js object) to control the lifecycle of native(cpp) object or the other way around. Supported values are 'yes' or 'no'.</div><div>script_control_cpp = no</div><div><br></div></div><div><br></div><div><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;"><b>5：修改genbindings.py文件</b></span></div><div><img src="cocos2dx-lua 的 tolua使用（自己动手实现）_files/337b0094-3246-400b-8ef9-d447894432b4.png" border="0" alt=""><br></div><div><br></div><div><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;"><b>6：执行命令生成文件：</b></span></div><div>在J:\cocos\workspace\CocosDemo\frameworks\cocos2d-x\tools\tolua目录下运行如下 &nbsp;&gt;python &nbsp;genbindings.py</div><div>注意：</div><div>1,<span style="line-height: 1.6;">尽量在cd到tolua目录下运行生成命令。</span></div><div><span style="line-height: 1.6;">2，如果生成报错，'dos2unix' 不是内部或外部命令，可以将dos2unix.exe复制到J:\cocos\workspace\CocosDemo\frameworks\cocos2d-x\tools\bindings-generator\tools\win32目录下。</span></div><div>3，dos2unix.exe文件可以在最新的github上获取https://github.com/guojian822/bindings-generator最行的。</div><div><br></div><div><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;"><b>7：成功后会有对应的文件在J:\cocos\workspace\CocosDemo\frameworks\cocos2d-x\cocos\scripting\lua-bindings\auto目录下生成。</b></span></div><div><img src="cocos2dx-lua 的 tolua使用（自己动手实现）_files/a1e30dc0-e402-4bc3-bde4-2c327a285e36.png" border="0" alt=""><br></div><div><br></div><div><b><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;">8：将生成的文件引用到vs中：如下图位置</span></b></div><div><img src="cocos2dx-lua 的 tolua使用（自己动手实现）_files/6b97aa31-4f02-4168-a202-773cc198ec4f.png" border="0" alt="" name=""><br></div><div><img src="cocos2dx-lua 的 tolua使用（自己动手实现）_files/1defec8b-4fe8-43e1-871a-d729856a9499.png" border="0" alt="" style="line-height: 1.6;" name=""></div><div><br></div><div>2：但是lua_MyClass_auto.cpp里面引用的“MyClass.h”的路径有问题，如下图：</div><div><img src="cocos2dx-lua 的 tolua使用（自己动手实现）_files/10331996-5468-4a44-8cf5-6e77126d6a8c.png" border="0" alt=""><br></div><div>3：需要在vs中如下设置</div><div><img src="cocos2dx-lua 的 tolua使用（自己动手实现）_files/9dab61f9-3103-43f7-90ac-29a4efb7fd9d.png" border="0" alt=""><br></div><div><img src="cocos2dx-lua 的 tolua使用（自己动手实现）_files/df0fa77c-fadb-4c11-8a5f-9ef5dacf017b.png" border="0" alt="" name=""><br></div><div><img src="cocos2dx-lua 的 tolua使用（自己动手实现）_files/9bf72c3b-e506-47b5-ba40-15414ceced52.png" border="0" alt=""><br></div><div>添加MyClass.h的文件路径</div><div>这样就可以编译过了。</div><div><br></div><div><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;"><b>9：lua代码中调用自定义的方法</b></span></div><div>&nbsp;代码如下：</div><div><img src="cocos2dx-lua 的 tolua使用（自己动手实现）_files/69314391-cce9-4c3a-b0a3-cb99b35cff3b.png" border="0" alt="" name=""><br></div><div>需要的文件都传至百度云中。</div><div><img src="cocos2dx-lua 的 tolua使用（自己动手实现）_files/3df68e65-3fd5-42e8-841e-89370fe630e1.png" border="0" alt=""><br></div></body></html>