<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>mysql 连接有效时间问题</title>
    <!--mark |wiz_custom_css| for wizeditor replace it-->
<style id="wiz_custom_css">html, body {            font-size: 15px;        }        body {            font-family: Helvetica, 'Hiragino Sans GB', '微软雅黑', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;            line-height: 1.6;            margin: 0;            padding: 20px 15px;            padding: 1.33rem 1rem;        }        h1, h2, h3, h4, h5, h6 {            margin: 20px 0 10px;            margin: 1.33rem 0 0.667rem;            padding: 0;            font-weight: bold;        }        h1 {            font-size: 21px;            font-size: 1.4rem;        }        h2 {            font-size: 20px;            font-size: 1.33rem;        }        h3 {            font-size: 18px;            font-size: 1.2rem;        }        h4 {            font-size: 17px;            font-size: 1.13rem;        }        h5 {            font-size: 15px;            font-size: 1rem;        }        h6 {            font-size: 15px;            font-size: 1rem;            color: #777777;            margin: 1rem 0;        }        div, p, ul, ol, dl, li {            margin: 0;        }        blockquote, table, pre, code {            margin: 8px 0;        }        ul, ol {            padding-left: 32px;            padding-left: 2.13rem;        }        blockquote {            padding: 0 12px;            padding: 0 0.8rem;        }        blockquote > :first-child {            margin-top: 0;        }        blockquote > :last-child {            margin-bottom: 0;        }        img {            border: 0;            max-width: 100%;            height: auto !important;            margin: 2px 0;        }        table {            border-collapse: collapse;            border: 1px solid #bbbbbb;        }        td, th {            padding: 4px 8px;            border-collapse: collapse;            border: 1px solid #bbbbbb;			        }        @media only screen and (-webkit-max-device-width: 1024px), only screen and (-o-max-device-width: 1024px), only screen and (max-device-width: 1024px), only screen and (-webkit-min-device-pixel-ratio: 3), only screen and (-o-min-device-pixel-ratio: 3), only screen and (min-device-pixel-ratio: 3) {            html, body {                font-size: 17px;            }            body {                line-height: 1.7;                padding: 0.75rem 0.9375rem;                color: #353c47;            }            h1 {                font-size: 2.125rem;            }            h2 {                font-size: 1.875rem;            }            h3 {                font-size: 1.625rem;            }            h4 {                font-size: 1.375rem;            }            h5 {                font-size: 1.125rem;            }            h6 {                color: inherit;            }            ul, ol {                padding-left: 2.5rem;            }            blockquote {                padding: 0 0.9375rem;            }        }</style><link rel="stylesheet"  name="wiz_tmp_editor_style" href="mysql 连接有效时间问题_files/fonts_1809.css"></head>

<body spellcheck="false" ><meta http-equiv="content-type" content="text/html; charset=utf-8"><title></title><div style="text-align: center;"><!--WizRtf2Html Charset=0  --><span style="font-size: 16pt; color: windowtext; font-family: 'Courier New';">mysql<span style="color: windowtext;">&nbsp;连接有效时间问题</span></span></div><div><span style="font-size: 16pt; color: windowtext; font-family: 'Courier New';"><span style="color: windowtext;"><br></span></span></div><div><span style="font-size: 16pt; color: windowtext; font-family: 'Courier New';"><span style="color: windowtext;"><br></span></span></div><div></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">wait_timeout：就是负责超时控制的变量,默认其时间为长度为28800s，就是8个小时。</span><span style="color: windowtext;"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">mysql</span></span><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">默认间隔8小时后断开。</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">interactive_timeout：这个值也需要修改（这个与客服端连接的方式有关，将两个设置相同即可）。</span></span></div><div></div><div></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">可以使用</span><span style="color: windowtext;"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">mysql</span></span><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">设置连接有效期：(windows下为my.ini，wait_timeout=315360000&nbsp;)</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&nbsp;&nbsp;&nbsp;&nbsp;1.直接用</span><span style="color: windowtext;"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">sql</span></span><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">命令行修改</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: windowtext;"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">mysql</span></span><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&gt;&nbsp;set&nbsp;global&nbsp;wait_timeout=28800</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: windowtext;"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">mysql</span></span><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&gt;&nbsp;set&nbsp;global&nbsp;interactive_timeout=28800</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&nbsp;&nbsp;&nbsp;&nbsp;#注：wait_timeout=28800&nbsp;=&nbsp;8小时</span></span></div><div></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&nbsp;&nbsp;&nbsp;&nbsp;2.查看超时时长</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: windowtext;"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">mysql</span></span><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&gt;&nbsp;show&nbsp;global&nbsp;variables&nbsp;like&nbsp;'wait_timeout'</span></span></div><div></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&nbsp;&nbsp;&nbsp;&nbsp;3.重启</span><span style="color: windowtext;"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">mysql</span></span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&nbsp;&nbsp;&nbsp;&nbsp;/etc/init.d/</span><span style="color: windowtext;"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">mysql</span></span><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&nbsp;restart&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><br></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><br></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><br></span></div><div></div><div></div><div></div><div></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">c3p0属性详细解释</span></span></div><div></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&lt;c3p0-</span><span style="color: windowtext;"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">config</span></span><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&lt;default-</span><span style="color: windowtext;"><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">config</span></span><span data-wiz-span="data-wiz-span" style="font-size: 1.067rem;">&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--当连接池中的连接耗尽的时候c3p0一次同时获取的连接数。Default:&nbsp;3&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="acquireIncrement"&gt;3&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--定义在从数据库获取新连接失败后重复尝试的次数。Default:&nbsp;30&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="acquireRetryAttempts"&gt;30&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--两次连接中间隔时间，单位毫秒。Default:&nbsp;1000&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="acquireRetryDelay"&gt;1000&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--连接关闭时默认将所有未提交的操作回滚。Default:&nbsp;false&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="autoCommitOnClose"&gt;false&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--c3p0将建一张名为Test的空表，并使用其自带的查询语句进行测试。如果定义了这个参数那么</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">属性preferredTestQuery将被忽略。你不能在这张Test表上进行任何操作，它将只供c3p0测试</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">使用。Default:&nbsp;null--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="automaticTestTable"&gt;Test&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--获取连接失败将会引起所有等待连接池来获取连接的线程抛出异常。但是数据源仍有效</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">保留，并在下次调用getConnection()的时候继续尝试获取连接。如果设为true，那么在尝试</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">获取连接失败后该数据源将申明已断开并永久关闭。Default:&nbsp;false--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="breakAfterAcquireFailure"&gt;false&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--当连接池用完时客户端调用getConnection()后等待获取新连接的时间，超时后将抛出</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">SQLException,如设为0则无限期等待。单位毫秒。Default:&nbsp;0&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="checkoutTimeout"&gt;100&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--通过实现ConnectionTester或QueryConnectionTester的类来测试连接。类名需制定全路径。</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">Default:&nbsp;com.mchange.v2.c3p0.impl.DefaultConnectionTester--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="connectionTesterClassName"&gt;&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--指定c3p0&nbsp;libraries的路径，如果（通常都是这样）在本地即可获得那么无需设置，默认null即可</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">Default:&nbsp;null--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="factoryClassLocation"&gt;null&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--Strongly&nbsp;</span><span style="color: windowtext;"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">disrecommended</span></span><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">.&nbsp;Setting&nbsp;this&nbsp;to&nbsp;true&nbsp;may&nbsp;lead&nbsp;to&nbsp;subtle&nbsp;and&nbsp;bizarre&nbsp;bugs.</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">（文档原文）作者强烈建议不使用的一个属性--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="forceIgnoreUnresolvedTransactions"&gt;false&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--每60秒检查所有连接池中的空闲连接。Default:&nbsp;0&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="idleConnectionTestPeriod"&gt;60&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--初始化时获取三个连接，取值应在minPoolSize与maxPoolSize之间。Default:&nbsp;3&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="initialPoolSize"&gt;3&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--最大空闲时间,60秒内未使用则连接被丢弃。若为0则永不丢弃。Default:&nbsp;0&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="maxIdleTime"&gt;60&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--连接池中保留的最大连接数。Default:&nbsp;15&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="maxPoolSize"&gt;15&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--JDBC的标准参数，用以控制数据源内加载的PreparedStatements数量。但由于预缓存的statements</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">属于单个connection而不是整个连接池。所以设置这个参数需要考虑到多方面的因素。</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">如果maxStatements与maxStatementsPerConnection均为0，则缓存被关闭。Default:&nbsp;0--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="maxStatements"&gt;100&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--maxStatementsPerConnection定义了连接池内单个连接所拥有的最大缓存statements数。Default:&nbsp;0&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="maxStatementsPerConnection"&gt;&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--c3p0是异步操作的，缓慢的JDBC操作通过帮助进程完成。扩展这些操作可以有效的提升性能</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">通过多线程实现多个操作同时被执行。Default:&nbsp;3--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="numHelperThreads"&gt;3&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--当用户调用getConnection()时使root用户成为去获取连接的用户。主要用于连接池连接非c3p0</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">的数据源时。Default:&nbsp;null--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="overrideDefaultUser"&gt;root&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--与overrideDefaultUser参数对应使用的一个参数。Default:&nbsp;null--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="overrideDefaultPassword"&gt;password&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--密码。Default:&nbsp;null--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="password"&gt;&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--定义所有连接测试都执行的测试语句。在使用连接测试的情况下这个一显著提高测试速度。注意：</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">测试的表必须在初始数据源的时候就存在。Default:&nbsp;null--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="preferredTestQuery"&gt;select&nbsp;id&nbsp;from&nbsp;test&nbsp;where&nbsp;id=1&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--用户修改系统配置参数执行前最多等待300秒。Default:&nbsp;300&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="propertyCycle"&gt;300&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--因性能消耗大请只在需要的时候使用它。如果设为true那么在每个connection提交的</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">时候都将校验其有效性。建议使用idleConnectionTestPeriod或automaticTestTable</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">等方法来提升连接测试的性能。Default:&nbsp;false&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="testConnectionOnCheckout"&gt;false&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--如果设为true那么在取得连接的同时将校验连接的有效性。Default:&nbsp;false&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="testConnectionOnCheckin"&gt;true&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--用户名。Default:&nbsp;null--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="user"&gt;root&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">在</span><span style="color: windowtext;"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">Hibernate</span></span><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">（spring管理）中的配置：</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&nbsp;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;bean&nbsp;id="dataSource"&nbsp;class="com.mchange.v2.c3p0.ComboPooledDataSource"&nbsp;destroy-method="close"&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="driverClass"&gt;&lt;value&gt;oracle.jdbc.driver.OracleDriver&lt;/value&gt;&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="jdbcUrl"&gt;&lt;value&gt;jdbc:oracle:thin:</span><span style="color: windowtext;"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">@localhost</span></span><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">:1521:Test&lt;/value&gt;&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="user"&gt;&lt;value&gt;</span><span style="color: windowtext;"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">Kay</span></span><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;/value&gt;&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="password"&gt;&lt;value&gt;root&lt;/value&gt;&lt;/property&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--连接池中保留的最小连接数。--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="minPoolSize"&nbsp;value="10"&nbsp;/&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--连接池中保留的最大连接数。Default:&nbsp;15&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="maxPoolSize"&nbsp;value="100"&nbsp;/&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--最大空闲时间,1800秒内未使用则连接被丢弃。若为0则永不丢弃。Default:&nbsp;0&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="maxIdleTime"&nbsp;value="1800"&nbsp;/&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--当连接池中的连接耗尽的时候c3p0一次同时获取的连接数。Default:&nbsp;3&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="acquireIncrement"&nbsp;value="3"&nbsp;/&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="maxStatements"&nbsp;value="1000"&nbsp;/&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="initialPoolSize"&nbsp;value="10"&nbsp;/&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--每60秒检查所有连接池中的空闲连接。Default:&nbsp;0&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="idleConnectionTestPeriod"&nbsp;value="60"&nbsp;/&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;!--定义在从数据库获取新连接失败后重复尝试的次数。Default:&nbsp;30&nbsp;--&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="acquireRetryAttempts"&nbsp;value="30"&nbsp;/&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="breakAfterAcquireFailure"&nbsp;value="true"&nbsp;/&gt;</span></span></div><div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;property&nbsp;name="testConnectionOnCheckout"&nbsp;value="false"&nbsp;/&gt;</span></span></div><span style="font-size:16pt;font-family:'Courier New';"><span data-wiz-span="data-wiz-span" style="font-size: 1.2rem;">&lt;/bean&gt;</span></span></body></html>